var beginScene=cc.Scene.extend({adddialog:!1,ctor:function(){this._super(),this.init()},init:function(){var a=new cc.Sprite(res.gameBg);a.x=size.width/2,a.y=size.height/2,this.addChild(a,0);var b=new cc.MenuItemImage(res.beginBtn,res.beginBtn,this.beginCall,this),c=new cc.Menu(b);c.x=size.width/2,c.y=size.height/2,this.addChild(c);var d=size.height-50,e=new cc.MenuItemImage(res.ruleBtn,res.ruleBtn,this.ruleBtnCall,this),f=new cc.Menu(e);f.x=80,f.y=d,this.addChild(f);var g=new cc.MenuItemImage(res.phbBtn,res.phbBtn,this.phbBtnCall,this),h=new cc.Menu(g);h.x=size.width-180,h.y=d,this.addChild(h);var i=new cc.MenuItemImage(res.PrizeBtn,res.PrizeBtn,this.PrizeBtnCall,this),j=new cc.Menu(i);j.x=size.width-80,j.y=d,this.addChild(j),this.scheduleUpdate()},update:function(){},beginCall:function(){cc.director.runScene(new ruleScene)},ruleBtnCall:function(){this.adddialog||(this.adddialog=!0,this.layer_1=new ruleLayer(this),this.addChild(this.layer_1))},phbBtnCall:function(){this.adddialog||(this.adddialog=!0,this.layer_2=new listLayer(this,"dafd"),this.addChild(this.layer_2))},PrizeBtnCall:function(){this.adddialog||(this.adddialog=!0,this.layer_3=new prizeLayer(this,0),this.addChild(this.layer_3))}}),ListViewScene=cc.Scene.extend({onEnter:function(){this._super();var a=new TestLayer;this.addChild(a)}}),LINE_SPACE=40,curPos={x:0,y:0},TestLayer=cc.LayerGradient.extend({YOffset:0,ctor:function(){this._super(cc.color(0,0,0,255),cc.color(70,130,180,255)),this.init()},init:function(){director=cc.director,winSize=director.getWinSize(),this._itemMenu=new cc.Menu;for(var a=0,b=testNames.length;b>a;a++){var c=new cc.LabelTTF(testNames[a].title,"Arial",24),d=new cc.MenuItemLabel(c,this.onMenuCallback,this);this._itemMenu.addChild(d,a+1e4),d.x=winSize.width/2,d.y=winSize.height-(a+1)*LINE_SPACE,d.setEnabled(!0)}this._itemMenu.width=winSize.width,this._itemMenu.height=(testNames.length+1)*LINE_SPACE,this._itemMenu.x=curPos.x,this._itemMenu.y=curPos.y,this.addChild(this._itemMenu),"touches"in cc.sys.capabilities?cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesMoved:function(a,b){var c=b.getCurrentTarget(),d=a[0].getDelta();return c.moveMenu(d),!0}},this):"mouse"in cc.sys.capabilities&&cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:function(a){a.getButton()==cc.EventMouse.BUTTON_LEFT&&a.getCurrentTarget().moveMenu(a.getDelta())},onMouseScroll:function(a){var b=cc.sys.isNative?6*a.getScrollY():-a.getScrollY();return a.getCurrentTarget().moveMenu({y:b}),!0}},this)},onMenuCallback:function(a){var b=a.getLocalZOrder()-1e4;console.log(testNames[b].title),alert("你选择了 "+testNames[b].title)},moveMenu:function(a){var b=this._itemMenu.y+a.y;0>b&&(b=0),b>(testNames.length+1)*LINE_SPACE-winSize.height&&(b=(testNames.length+1)*LINE_SPACE-winSize.height),this._itemMenu.y=b}}),testNames=[{title:"MenuItem01 Test"},{title:"MenuItem02 Test"},{title:"MenuItem03 Test"},{title:"MenuItem04 Test"},{title:"MenuItem05 Test"},{title:"MenuItem06 Test"},{title:"MenuItem07 Test"},{title:"MenuItem08 Test"},{title:"MenuItem09 Test"},{title:"MenuItem10 Test"},{title:"MenuItem11 Test"},{title:"MenuItem12 Test"},{title:"MenuItem13 Test"},{title:"MenuItem14 Test"},{title:"MenuItem15 Test"},{title:"MenuItem16 Test"},{title:"MenuItem17 Test"},{title:"MenuItem18 Test"},{title:"MenuItem19 Test"},{title:"MenuItem20 Test"}],TestListView=cc.LayerGradient.extend({ctor:function(){this._super(cc.color(0,0,0,255),cc.color(70,130,180,255)),this.init()},init:function(){var a=new ccui.ListView;a.setDirection(ccui.ScrollView.DIR_VERTICAL),a.setTouchEnabled(!0),a.setBounceEnabled(!0),a.setContentSize(cc.size(300,200)),a.x=(cc.winSize.width-a.width)/2,a.y=(cc.winSize.height-a.height)/2-20,a.addEventListener(this.selectedItemEvent,this);var b=new cc.LabelTTF("第0关","Microsoft YaHei",24),c=new ccui.Layout;c.setTouchEnabled(!0),c.setContentSize(cc.size(300,35)),c.width=a.width,c.addChild(b),a.setItemModel(c);for(var d=0;10>d;++d){a.pushBackDefaultItem();var e=new cc.LabelTTF("第"+(d+1)+"关","Microsoft YaHei",24);e.x=150,e.y=-35*d-10,console.log(e.y);var f=new ccui.Layout;f.width=a.width,f.addChild(e),a.insertCustomItem(f)}a.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL),this.addChild(a)},selectedItemEvent:function(a,b){switch(b){case ccui.ListView.EVENT_SELECTED_ITEM:var c=a;cc.log("select child index = "+c.getCurSelectedIndex())}}}),size={width:640,height:1024},endsuccessScene=cc.Scene.extend({ctor:function(a,b,c,d){this._super(a,b,c,d),this.scoreAtNow=null==a?0:a,this.scoreBest=null==b?0:b,this.pm=null==c?0:c,this.headRes=null==d?null:d,this.init(),this.initHead(this.headRes)},init:function(){var a=new cc.Sprite(res.gameBg);a.x=size.width/2,a.y=size.height/2,this.addChild(a,0);var b=new cc.Sprite(res.endBg);b.x=size.width/2,b.y=size.height/2,this.addChild(b,1);var c=new cc.Sprite(res.success);c.x=size.width/2,c.y=size.height-250,c.scale=2,this.addChild(c,10);var d=new cc.scaleTo(.8,1);d.easing(cc.easeBackInOut()),c.runAction(d);var e=new cc.Sprite(res.star);e.x=size.width/2,e.y=size.height-130,e.scaleY=.2,this.addChild(e);var f=new cc.scaleTo(.8,1,1);f.easing(cc.easeBackInOut()),e.runAction(f);var g=new cc.Sprite(res.shine);g.x=size.width/2,g.y=size.height-135,this.addChild(g);var h=new cc.scaleTo(1,1.2),i=new cc.callFunc(function(){g.scale=1},this),j=new cc.sequence(h,i),k=j.repeatForever();g.runAction(k);var l=size.height/2+100;this.txt11=cc.LabelTTF.create(""+this.scoreAtNow,"Arial",64,cc.TEXT_ALIGN_CENTER),this.txt11.fillStyle=cc.color(0,0,0),this.txt11.x=size.width/2,this.txt11.y=l-120,this.addChild(this.txt11,1),this.txt1=cc.LabelTTF.create(""+this.scoreBest,"Arial",36),this.txt1.fillStyle=cc.color(239,80,80),this.txt1.x=size.width/2+60,this.txt1.y=l-190,this.addChild(this.txt1,1),this.txt2=cc.LabelTTF.create(""+this.pm,"Arial",36),this.txt2.fillStyle=cc.color(239,80,80),this.txt2.x=size.width/2+60,this.txt2.y=l-230,this.addChild(this.txt2,1);var m=new cc.MenuItemImage(res.btn1,res.btn1,this.btn1Call,this);m.x=0,m.y=100;var n=new cc.MenuItemImage(res.btn2,res.btn2,this.btn2Call,this);n.x=220,n.y=100;var o=new cc.Menu(m,n);o.x=size.width/2-110,o.y=size.height/2-320,this.addChild(o,1)},btn1Call:function(){console.log("btn1Call");var a=new infoLayer(3);this.addChild(a,100)},btn2Call:function(){console.log("btn2Call"),cc.director.runScene(new gameScene)},initHead:function(a){var b=new cc.ClippingNode,c=new cc.DrawNode;c.clear(),c.ctor(),c.drawCircle(cc.p(0,0),80,0,8e3,!1,6,cc.color(125,125,100,255)),b.setStencil(c);var d=res.defaultHead;d=""==a||void 0==a?res.defaultHead:a;var e=new cc.Sprite(d);b.addChild(e),b.x=size.width/2,b.y=size.height-135,this.addChild(b,1)}}),endFailScene=cc.Scene.extend({ctor:function(a,b,c,d){this._super(a,b,c,d),this.scoreAtNow=null==a?0:a,this.scoreBest=null==b?0:b,this.pm=null==c?0:c,this.headRes=null==d?null:d,this.init(),this.initHead(this.headRes)},init:function(){var a=new cc.Sprite(res.gameBg);a.x=size.width/2,a.y=size.height/2,this.addChild(a,0);var b=new cc.Sprite(res.endBg1);b.x=size.width/2,b.y=size.height/2,this.addChild(b,1);var c=new cc.Sprite(res.fail);c.x=size.width/2,c.y=size.height-250,c.scale=2,this.addChild(c,10);var d=new cc.scaleTo(.8,1);d.easing(cc.easeBackInOut()),c.runAction(d);var e=new cc.Sprite(res.star);e.x=size.width/2,e.y=size.height-130,e.scaleY=.2,this.addChild(e);var f=new cc.scaleTo(.8,1,1);f.easing(cc.easeBackInOut()),e.runAction(f);var g=size.height/2+100;this.txt11=cc.LabelTTF.create(""+this.scoreAtNow,"Arial",64,cc.TEXT_ALIGN_CENTER),this.txt11.fillStyle=cc.color(0,0,0),this.txt11.x=size.width/2,this.txt11.y=g-120,this.addChild(this.txt11,1),this.txt1=cc.LabelTTF.create(""+this.scoreBest,"Arial",36),this.txt1.fillStyle=cc.color(239,80,80),this.txt1.x=size.width/2+60,this.txt1.y=g-190,this.addChild(this.txt1,1),this.txt2=cc.LabelTTF.create(""+this.pm,"Arial",36),this.txt2.fillStyle=cc.color(239,80,80),this.txt2.x=size.width/2+60,this.txt2.y=g-230,this.addChild(this.txt2,1);var h=new cc.MenuItemImage(res.btn1,res.btn1,this.btn1Call,this);h.x=0,h.y=100;var i=new cc.MenuItemImage(res.btn2,res.btn2,this.btn2Call,this);i.x=220,i.y=100;var j=new cc.Menu(h,i);j.x=size.width/2-110,j.y=size.height/2-320,this.addChild(j,1)},btn1Call:function(){console.log("btn1Call")},btn2Call:function(){console.log("btn2Call")},initHead:function(a){var b=new cc.ClippingNode,c=new cc.DrawNode;c.clear(),c.ctor(),c.drawCircle(cc.p(0,0),80,0,8e3,!1,6,cc.color(125,125,100,255)),b.setStencil(c);var d=res.defaultHead;d=""==a||void 0==a?res.defaultHead:a;var e=new cc.Sprite(d);b.addChild(e),b.x=size.width/2,b.y=size.height-135,this.addChild(b,1)}}),size={width:640,height:1024};