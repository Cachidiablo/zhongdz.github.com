function resourceCallBack(){cc.game.onStart=function(){cc.view.adjustViewPort(!0),thisismobile?cc.view.setDesignResolutionSize(640,1e3,cc.ResolutionPolicy.EXACT_FIT):cc.view.setDesignResolutionSize(640,1e3,cc.ResolutionPolicy.SHOW_ALL),cc.view.resizeWithBrowserSize(!0),MyLoaderScene.preload(g_resources,function(){cc.director.runScene(new MyScene)},this)},cc.game.run("gameCanvas")}function GetRandomNum(a,b){var c=b-a,d=Math.random();return a+Math.round(d*c)}var game=null,Game=cc.Class.extend({score:0,time:7,inittime:7,alltime:14,envelopeTouch:!1,gamecanotouch:!1,init:function(){var a=[];this.pushRublish=function(b){a.push(b)},this.removeAllobj=function(b){for(var c=0;c<=a.length-1;c++)b.removeChild(a[c]);a=[]}},resetGame:function(){this.score=0,this.time=this.inittime}});game=new Game,game.init();var gameScore=0,global_game_start=!1,myscroll1=new IScroll("#rule_wrapper",{click:!0}),myscroll2=new IScroll("#phb_wrapper",{click:!0});!function(){TOOL.closeFun(".prize_close_btn",".prizePage"),TOOL.closeFun(".rule_close_btn",".rulePage",function(){console.log("here")}),TOOL.closeFun(".phb_close_btn",".phbPage"),TOOL.closeFun(".info_close_btn",".infoPage",function(){console.log("heree")}),TOOL.closeFun(".beginBtn",".beginPage",function(){global_game_start=!0}),TOOL.closeFun(".rule_btn","",function(){TOOL.showDialog(".rulePage","fadeInDown",function(){$(".rulePage").removeClass("animated fadeInDown"),myscroll1.refresh()})}),TOOL.closeFun(".record_btn","",function(){system.isUserInfo?GD.rankingList(1,function(a){var b=a.code;switch(b){case 0:TOOL.showDialog(".phbPage","bounceIn",function(){$(".phbPage").removeClass("animated bounceIn"),myscroll2.refresh()}),$(".phbContent ul").append("获取失败！"),$(".phbContent ul").css({width:"150px",height:"100px","font-size":"26px",position:"absolute",top:"20px",left:"200px"});break;case 1:TOOL.createPhbData(a),TOOL.showDialog(".phbPage","bounceIn",function(){$(".phbPage").removeClass("animated bounceIn"),myscroll2.refresh()});break;case 2:TOOL.showDialog(".phbPage","bounceIn",function(){$(".phbPage").removeClass("animated bounceIn"),myscroll2.refresh()}),$(".phbContent ul").append("暂无数据！"),$(".phbContent ul").css({width:"150px",height:"100px","font-size":"26px",position:"absolute",top:"20px",left:"200px"})}}):($(".phbPage").removeClass("hide"),TOOL.showDialog(".phbPage","bounceInDown",function(){}))}),TOOL.closeFun(".playAgain",".endPage",function(){game.resetGame();new BeginScene;cc.director.runScene(new BeginScene)}),TOOL.closeFun(".seeMore","",function(){$(".sharePage").removeClass("hide")}),TOOL.closeFun(".lottery",".endPage",function(){game.resetGame();new BeginScene;cc.director.runScene(new BeginScene)}),TOOL.closeFun(".sharePage",".sharePage",function(){$(".sharePage").addClass("hide")}),$(".info_send_btn").off().on("touchstart",function(){var a=$(".user_name").val(),b=$(".user_phone").val();GD.userInfo(a,b,function(a){var b=a.code;switch(b){case 0:TOOL.showDialog(".alertPage","fadeInDown",function(){$(".alertPage").removeClass("animated fadeInDown")}),$(".alertContent").html("网络出错！");break;case 1:system.isUserInfo=!0,$(".infoPage").addClass("hide"),GD.rankingList(1,function(a){var b=a.code;switch(b){case 0:TOOL.showDialog(".phbPage","bounceIn",function(){$(".phbPage").removeClass("animated bounceIn"),myscroll2.refresh()}),$(".phbContent ul").append("获取失败！"),$(".phbContent ul").css({width:"150px",height:"100px","font-size":"26px",position:"absolute",top:"20px",left:"200px"});break;case 1:TOOL.createPhbData(a),TOOL.showDialog(".phbPage","bounceIn",function(){$(".phbPage").removeClass("animated bounceIn"),myscroll2.refresh()});break;case 2:TOOL.showDialog(".phbPage","bounceIn",function(){$(".phbPage").removeClass("animated bounceIn"),myscroll2.refresh()}),$(".phbContent ul").append("暂无数据！"),$(".phbContent ul").css({width:"150px",height:"100px","font-size":"26px",position:"absolute",top:"20px",left:"200px"})}})}})})}(),window.onload=function(){TOOL.loading(1500),resourceCallBack(),TOOL.media({musicSrc:"/html/static/xxl/res/vo/bgmusic.mp3",musicPlaySrc:"/html/static/xxl/res/img/mPlay.png",musicPauseSrc:"/html/static/xxl/res/img/mPaused.png"})};var MyLoaderScene=cc.Scene.extend({_interval:null,_length:0,_count:0,_label:null,_className:"MyLoaderScene",init:function(){var a=this,b=a._bgLayer=cc.LayerColor.create(cc.color(32,32,32,255));b.setPosition(cc.visibleRect.bottomLeft),a.addChild(b,0);var c=24,d=cc.director.getWinSize(),e=a._label=cc.LabelTTF.create("Loading... 0%","Arial",c);return e.setPosition(d.width/2,d.height/2-200),e.setColor(cc.color(255,255,255)),b.addChild(this._label,10),!0},_initStage:function(a,b){var c=this,d=c._texture2d=new cc.Texture2D;d.initWithElement(a),d.handleLoadedTexture();var e=c._logo=cc.Sprite.create(d);e.setScale(cc.contentScaleFactor()),e.x=b.x,e.y=b.y,c._bgLayer.addChild(e,10)},onEnter:function(){var a=this;cc.Node.prototype.onEnter.call(a),a.schedule(a._startLoading,.3)},onExit:function(){cc.Node.prototype.onExit.call(this);var a="Loading... 100%";this._label.setString(a)},initWithResources:function(a,b){"string"==typeof a&&(a=[a]),this.resources=a||[],this.cb=b},_startLoading:function(){var a=this;a.unschedule(a._startLoading);var b=a.resources;cc.loader.load(b,function(b,c,d){var e=d/c*100|0;e=Math.min(e,100),a._label.setString("Loading... "+e+"%")},function(){a.cb&&a.cb()})},_updatePercent:function(){var a=this,b=a._count,c=a._length,d=b/c*100|0;d=Math.min(d,100),a._label.setString("Loading... "+d+"%"),b>=c&&a.unschedule(a._updatePercent)}});MyLoaderScene.preload=function(a,b){var c=null;return c||(c=new MyLoaderScene,c.init()),c.initWithResources(a,b),cc.director.runScene(c),c};var thisismobile=!1;thisismobile=!(!/AppleWebKit.*Mobile/i.test(navigator.userAgent)&&!/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent));var MyScene=cc.Scene.extend({gameLayer:{barlayer:40,touchlayer:30,showlayer:20},tick:0,showLayer:null,envelopeSpriteArr:null,envelopeRublishArr:[],envelopeBomeSpriteArr:[],playerSprite:null,topLab:null,topLayer:null,spriteword:null,spritebg:null,gesprite:null,shisprite:null,checkSameAllL:[],checkSameAllH:[],bomb:[],combotimes:0,resettime:0,checkdownnow:!1,onEnter:function(){this._super(),this.init()},init:function(){function a(a,b){}function b(a,b){}function c(a,b){}this.showLayer=cc.Layer.create(),this.addChild(this.showLayer,this.gameLayer.showlayer),this.envelopeSpriteArr=[];for(var d=0;d<=4;d++)this.envelopeSpriteArr[d]=[];this.envelopeBomeSpriteArr=[];for(var d=0;d<=4;d++)this.envelopeBomeSpriteArr[d]=[];var e=cc.director.getWinSize(),f=cc.Sprite.create(res.main_bg);f.setPosition(e.width/2,f.getContentSize().height/2),this.showLayer.addChild(f);var g=cc.Layer.create(),h=cc.Sprite.create(res.top_bar);h.setPosition(e.width/2,e.height-h.getContentSize().height/2),g.addChild(h),this.timeLoadingBar=new loadingSprite,this.timeLoadingBar.setPrecent(80),g.addChild(this.timeLoadingBar),this.topLab=new cc.LabelTTF(game.score,"70",80,cc.size(270,90),cc.TEXT_ALIGNMENT_LEFT),g.addChild(this.topLab,10),this.topLab.fillStyle=cc.color(255,230,0,255),this.addChild(g,this.gameLayer.barlayer),this.topLab.x=410,this.topLab.y=910,this.topLayer=g;var i=!0,j=new cc.MenuItemImage(res.refresh_but,res.refresh_but,function(){if(i){i=!1;for(var a=0;a<=4;a++)for(var b=0;b<=5;b++)this.showLayer.removeChild(this.envelopeSpriteArr[a][b]);this.envelopeSpriteArr=[];for(var c=0;c<=4;c++)this.envelopeSpriteArr[c]=[];this.initAddEnvelopeSprites(),j.setColor(cc.color(100,100,0,255));var d=cc.delayTime(7),e=cc.callFunc(function(){i=!0,j.setColor(cc.color(255,255,255,255))},this);this.runAction(cc.sequence(d,e))}},this);j.setPosition(250,410);var k=new cc.Menu(j);g.addChild(k,1);var l=cc.Layer.create();cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:a,onTouchMoved:b,onTouchEnded:c},l),this.spriteword=new cc.Sprite(res.combo_word),this.spritebg=new cc.Sprite(res.combo_bg),this.spriteword.setScale(.7),this.spritebg.setScale(.7),this.topLayer.addChild(this.spritebg,20),this.topLayer.addChild(this.spriteword,20),this.spriteword.setPosition(cc.p(e.width/2,890)),this.spritebg.setPosition(cc.p(e.width/2,890));var m=cc.textureCache.addImage(res.combo_num),n=61.9,o=182,p=new cc.SpriteFrame(m,cc.rect(0*n,0*o,n,o));this.gesprite=new cc.Sprite(p);var q=new cc.SpriteFrame(m,cc.rect(0*n,0*o,n,o));this.shisprite=new cc.Sprite(q),this.gesprite.setScale(.7),this.shisprite.setScale(.7),this.gesprite.setPosition(cc.p(e.width/2+30,890)),this.shisprite.setPosition(cc.p(e.width/2+30,890)),this.topLayer.addChild(this.gesprite,20),this.topLayer.addChild(this.shisprite,20),this.spriteword.setVisible(!1),this.spritebg.setVisible(!1),this.shisprite.setVisible(!1),this.gesprite.setVisible(!1);var r=cc.director.getScheduler(),s=0,t=!1;r.scheduleUpdateForTarget(this,s,t),this.initAddEnvelopeSprites()},update:function(a){if(!global_game_start)return void(global_game_start=!1);if(this.tick++,this.tick%60==0&&(game.time>=0?(this.timeLoadingBar.setPrecent(game.time/14*100|0),game.time--):game.time<0?(this.timeLoadingBar.setPrecent(0),game.time=0):game.time>=game.alltime&&(this.timeLoadingBar.setPrecent(100),game.time=game.alltime,game.time--),0==game.time)){$(".outTime").show(),$(".outTimeTip").html("正在提交分数,请稍后..."),game.resetGame();new BeginScene;cc.director.runScene(new BeginScene)}if(game.envelopeTouch){game.envelopeTouch=!1;for(var b=0;b<=4;b++)for(var c=0;c<=5;c++)if(5!=this.envelopeSpriteArr[b][c].DirectionType){var d=this.envelopeSpriteArr[b][c].DirectionType;return void this.envelopeMoveOther(b,c,d)}}this.showComboLab()},onExit:function(){this.unscheduleUpdate(),this.removeAllChildrenWithCleanup(!0)},initAddEnvelopeSprites:function(){for(var a=0;a<=4;a++)for(var b=0;b<=5;b++){var c=new envelopeBomeSprite;c.setPos(a,b),this.showLayer.addChild(c),this.envelopeBomeSpriteArr[a][b]=c}for(var a=0;a<=4;a++)for(var b=0;b<=5;b++){var d=new envelopeSprite;d.setPos(a,b),this.showLayer.addChild(d),this.envelopeSpriteArr[a][b]=d}var e=cc.delayTime(.6),f=cc.callFunc(function(){this.changAllEvelope()},this),g=cc.sequence(e,f);this.runAction(g)},envelopeMoveOther:function(a,b,c){var d,e;switch(c){case 0:if(d=a,e=b+1,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Down(),this.envelopeSpriteArr[a][b].Up();break;case 1:if(d=a,e=b-1,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Up(),this.envelopeSpriteArr[a][b].Down();break;case 2:if(d=a-1,e=b,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Right(),this.envelopeSpriteArr[a][b].Left();break;case 3:if(d=a+1,e=b,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Left(),this.envelopeSpriteArr[a][b].Right()}this.envelopeSpriteArr[d][e].movenow=!0,this.envelopeSpriteArr[a][b].movenow=!0;var f=this.envelopeSpriteArr[a][b];this.envelopeSpriteArr[a][b]=this.envelopeSpriteArr[d][e],this.envelopeSpriteArr[d][e]=f;var g=c,h=cc.delayTime(0),i=cc.callFunc(function(){this.changAllEvelope(!0,a,b,d,e,g)},this),j=cc.sequence(h,i);this.runAction(j)},changAllEvelope:function(a,b,c,d,e,f){if(a){if(this.envelopeSpriteArr[b][c].isOnSameAll){var g=this.envelopeSpriteArr[d][e].envelopeType;return void this.sameAllBome(g,b,c)}if(this.envelopeSpriteArr[d][e].isOnSameAll){var g=this.envelopeSpriteArr[b][c].envelopeType;return void this.sameAllBome(g,d,e)}}for(var h=1,i=2,j=0;j<=4;j++)this.checkEvelopeSpriteArr(h,j,b,c,d,e,a);for(var j=0;j<=5;j++)this.checkEvelopeSpriteArr(i,j,b,c,d,e,a);this.checkdownnow=!0,this.checkSameAll();for(var j=0;j<=4;j++)this.spliceEnvelopeSprite(j,0,0);if(0==this.envelopeRublishArr.length){if(a){var g=f,k=b,l=c,m=d,n=e;switch(g){case 0:this.envelopeSpriteArr[k][l].Up(!0),this.envelopeSpriteArr[m][n].Down(!0);break;case 1:this.envelopeSpriteArr[k][l].Down(!0),this.envelopeSpriteArr[m][n].Up(!0);break;case 2:this.envelopeSpriteArr[k][l].Left(!0),this.envelopeSpriteArr[m][n].Right(!0);break;case 3:this.envelopeSpriteArr[k][l].Right(!0),this.envelopeSpriteArr[m][n].Left(!0)}var o=this.envelopeSpriteArr[m][n];this.envelopeSpriteArr[m][n]=this.envelopeSpriteArr[k][l],this.envelopeSpriteArr[k][l]=o}if(0!=this.combotimes){if(this.combotimes>=2){var p=cc.director.getWinSize();this.showScoreLab(100*this.combotimes,4,6,cc.p(p.width/2+80,920)),game.score+=100*this.combotimes}this.combotimes=0,this.spriteword.setVisible(!1),this.spritebg.setVisible(!1),this.shisprite.setVisible(!1),this.gesprite.setVisible(!1)}return this.allEnvelopeSpriteSetPos(),void(this.checkdownnow=!1)}for(var b=0;b<=4;b++)for(var c=0;c<=5;c++)void 0!=this.envelopeSpriteArr[b][c]&&(this.envelopeSpriteArr[b][c].movenow=!1);this.changeEvelopeSpriteArr()},checkEvelopeSpriteArr:function(a,b,c,d,e,f,g){var h=0,i=0;if(1==a){for(var j,k,l=this.envelopeSpriteArr[b][0].envelopeType,m=!1,n=0;n<=5;n++)if(void 0!=this.envelopeSpriteArr[b][n]){if(l==this.envelopeSpriteArr[b][n].envelopeType&&h++,l!=this.envelopeSpriteArr[b][n].envelopeType){if(h>=3){i=n,this.combotimes++;for(var o=0;o<=5;o++)this.envelopeSpriteArr[b][o].downnow=!0;for(var p=1;p<=h;p++)this.envelopeSpriteArr[b][i-p].removed=!0,this.envelopeBomeSpriteArr[b][i-p].isBome=!0,this.envelopeSpriteArr[b][i-p].isBomb&&(j=b,k=i-p,m=!0);m&&this.changeBomb(j,k),3==h&&(this.checkSameAllL[b]=i,this.envelopeSpriteArr[b][i-2].isnormalboom=!0,this.envelopeSpriteArr[b][i-2].normaltype=1),4==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isFire=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0)),5==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isStar=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0))}i=0,h=1,l=this.envelopeSpriteArr[b][n].envelopeType,m=!1}if(5==n&&h>=3){this.combotimes++,i=n;for(var o=0;o<=5;o++)this.envelopeSpriteArr[b][o].downnow=!0;for(var p=0;p<=h-1;p++)this.envelopeSpriteArr[b][i-p].removed=!0,this.envelopeBomeSpriteArr[b][i-p].isBome=!0,this.envelopeSpriteArr[b][i-p].isBomb&&(j=b,k=i-p,m=!0);m&&this.changeBomb(j,k),3==h&&(this.checkSameAllL[b]=i,this.envelopeSpriteArr[b][i-1].isnormalboom=!0,this.envelopeSpriteArr[b][i-1].normaltype=1),4==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isFire=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0)),5==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isStar=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0))}}}else for(var j,k,l=this.envelopeSpriteArr[0][b].envelopeType,m=!1,n=0;n<=4;n++)if(void 0!=this.envelopeSpriteArr[n][b]){if(l==this.envelopeSpriteArr[n][b].envelopeType&&h++,l!=this.envelopeSpriteArr[n][b].envelopeType){if(h>=3){this.combotimes++,i=n;for(var p=1;p<=h;p++){for(var o=0;o<=5;o++)this.envelopeSpriteArr[i-p][o].downnow=!0;this.envelopeSpriteArr[i-p][b].removed=!0,this.envelopeBomeSpriteArr[i-p][b].isBome=!0,this.envelopeSpriteArr[i-p][b].isBomb&&(j=i-p,m=!0,k=b)}m&&this.changeBomb(j,k),3==h&&(this.checkSameAllH.push(b),this.envelopeSpriteArr[i-2][b].isnormalboom=!0,this.envelopeSpriteArr[i-2][b].normaltype=2),4==h&&(g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isFire=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0)),5==h&&(this.combotimes++,g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isStar=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0))}h=1,l=this.envelopeSpriteArr[n][b].envelopeType,i=0,m=!1}if(4==n&&h>=3){this.combotimes++,i=n;for(var p=0;p<=h-1;p++){for(var o=0;o<=5;o++)this.envelopeSpriteArr[i-p][o].downnow=!0;this.envelopeSpriteArr[i-p][b].removed=!0,this.envelopeBomeSpriteArr[i-p][b].isBome=!0,this.envelopeSpriteArr[i-p][b].isBomb&&(j=i-p,k=b,m=!0)}m&&this.changeBomb(j,k),3==h&&(this.checkSameAllH.push(b),this.envelopeSpriteArr[i-1][b].isnormalboom=!0,this.envelopeSpriteArr[i-1][b].normaltype=2),4==h&&(g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isFire=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0)),5==h&&(g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isStar=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0))}}},checkSameAll:function(){for(var a=0;a<=4;a++)for(var b=0;b<=5;b++)if(this.envelopeSpriteArr[a][b].isnormalboom&&1==this.envelopeSpriteArr[a][b].normaltype){if(0!=b){if(0!=a&&this.envelopeSpriteArr[a-1][b-1].isnormalboom)return this.envelopeSpriteArr[a][b-1].removed=!1,void(this.envelopeSpriteArr[a][b-1].isSameAll=!0);if(4!=a&&this.envelopeSpriteArr[a+1][b-1].isnormalboom)return this.envelopeSpriteArr[a][b-1].removed=!1,void(this.envelopeSpriteArr[a][b-1].isSameAll=!0)}if(5!=b){if(0!=a&&this.envelopeSpriteArr[a-1][b+1].isnormalboom)return this.envelopeSpriteArr[a][b+1].removed=!1,void(this.envelopeSpriteArr[a][b+1].isSameAll=!0);if(4!=a&&this.envelopeSpriteArr[a+1][b+1].isnormalboom)return this.envelopeSpriteArr[a][b+1].removed=!1,void(this.envelopeSpriteArr[a][b+1].isSameAll=!0)}}},spliceEnvelopeSprite:function(a,b,c){var d=c;if(d<=5)if(d++,this.envelopeSpriteArr[a][b].removed)this.envelopeRublishArr.push(this.envelopeSpriteArr[a][b]),this.envelopeSpriteArr[a].splice(b,1),this.spliceEnvelopeSprite(a,b,d);else{var e=b;e++,this.spliceEnvelopeSprite(a,e,d)}},changeEvelopeSpriteArr:function(){for(var a=0;a<=this.envelopeRublishArr.length-1;a++)this.envelopeRublishArr[a].isnormalboom&&!this.envelopeRublishArr[a].isnotBomb&&this.showScoreLab(300,this.envelopeRublishArr[a].envelopeL,this.envelopeRublishArr[a].envelopeH),this.showLayer.removeChild(this.envelopeRublishArr[a]);for(var b=0;b<=this.envelopeSpriteArr.length-1;b++)for(var c=0;c<=this.envelopeSpriteArr[b].length-1;c++)this.envelopeSpriteArr[b][c].isFire&&!this.envelopeSpriteArr[b][c].isOnFire&&this.showScoreLab(500,this.envelopeSpriteArr[b][c].envelopeL,this.envelopeSpriteArr[b][c].envelopeH),this.envelopeSpriteArr[b][c].isStar&&!this.envelopeSpriteArr[b][c].isOnStar&&this.showScoreLab(500,this.envelopeSpriteArr[b][c].envelopeL,this.envelopeSpriteArr[b][c].envelopeH),this.envelopeSpriteArr[b][c].isSameAll&&!this.envelopeSpriteArr[b][c].isOnSameAll&&this.showScoreLab(500,this.envelopeSpriteArr[b][c].envelopeL,this.envelopeSpriteArr[b][c].envelopeH);game.time+=.5*this.envelopeRublishArr.length,game.time>=game.alltime&&(game.time=game.alltime),this.envelopeRublishArr=[],this.topLab.string=game.score;for(var b=0;b<=4;b++)for(var c=0;c<=5;c++)this.envelopeBomeSpriteArr[b][c].selectBome();for(var a=0;a<=4;a++)if(this.envelopeSpriteArr[a].length<6)for(var d=6-this.envelopeSpriteArr[a].length,e=0;e<=d-1;e++){var f=new envelopeSprite;f.addnum=e,this.showLayer.addChild(f),this.envelopeSpriteArr[a].push(f)}this.allEnvelopeSpriteSetPos();var g=cc.delayTime(.6),h=cc.callFunc(function(){this.changAllEvelope()},this),i=cc.sequence(g,h);this.runAction(i)},allEnvelopeSpriteSetPos:function(){for(var a=0;a<=4;a++)for(var b=0;b<=5;b++)void 0!=this.envelopeSpriteArr[a][b]&&this.envelopeSpriteArr[a][b].setPos(a,b,!0)},changeBomb:function(a,b){if(!this.envelopeSpriteArr[a][b].isBombed){var c=0,d=[];if(this.envelopeSpriteArr[a][b].removed=!0,this.envelopeSpriteArr[a][b].isnotBomb=!0,this.envelopeSpriteArr[a][b].isBombed=!0,this.envelopeSpriteArr[a][b].isOnFire){if(this.envelopeBomeSpriteArr[a][b].isFireBome=!0,c++,a>0){if(this.envelopeSpriteArr[a-1][b].removed=!0,this.envelopeBomeSpriteArr[a-1][b].isFireBome=!0,this.envelopeSpriteArr[a-1][b].isnotBomb=!0,this.envelopeSpriteArr[a-1][b].isBomb){var e={x:a-1,y:b};d.push(e)}if(c++,b>0&&(this.envelopeSpriteArr[a-1][b-1].removed=!0,this.envelopeBomeSpriteArr[a-1][b-1].isFireBome=!0,this.envelopeSpriteArr[a-1][b-1].isnotBomb=!0,c++,this.envelopeSpriteArr[a-1][b-1].isBomb)){var e={x:a-1,y:b-1};d.push(e)}if(b<5&&(this.envelopeSpriteArr[a-1][b+1].removed=!0,this.envelopeBomeSpriteArr[a-1][b+1].isFireBome=!0,this.envelopeSpriteArr[a-1][b+1].isnotBomb=!0,c++,this.envelopeSpriteArr[a-1][b+1].isBomb)){var e={x:a-1,y:b+1};d.push(e)}}if(a<4){if(this.envelopeSpriteArr[a+1][b].removed=!0,this.envelopeBomeSpriteArr[a+1][b].isFireBome=!0,this.envelopeSpriteArr[a+1][b].isnotBomb=!0,c++,this.envelopeSpriteArr[a+1][b].isBomb){var e={x:a+1,y:b};d.push(e)}if(b>0&&(this.envelopeSpriteArr[a+1][b-1].removed=!0,this.envelopeBomeSpriteArr[a+1][b-1].isFireBome=!0,this.envelopeSpriteArr[a+1][b-1].isnotBomb=!0,c++,this.envelopeSpriteArr[a+1][b-1].isBomb)){var e={x:a+1,y:b-1};d.push(e)}if(b<5&&(this.envelopeSpriteArr[a+1][b+1].removed=!0,this.envelopeBomeSpriteArr[a+1][b+1].isFireBome=!0,this.envelopeSpriteArr[a+1][b+1].isnotBomb=!0,c++,this.envelopeSpriteArr[a+1][b+1].isBomb)){var e={x:a+1,y:b+1};d.push(e)}}if(b>0&&(this.envelopeSpriteArr[a][b-1].removed=!0,this.envelopeBomeSpriteArr[a][b-1].isFireBome=!0,this.envelopeSpriteArr[a][b-1].isnotBomb=!0,c++,this.envelopeSpriteArr[a][b-1].isBomb)){var e={x:a,y:b-1};d.push(e)}if(b<5&&(this.envelopeSpriteArr[a][b+1].removed=!0,this.envelopeBomeSpriteArr[a][b+1].isFireBome=!0,this.envelopeSpriteArr[a][b+1].isnotBomb=!0,c++,this.envelopeSpriteArr[a][b+1].isBomb)){var e={x:a,y:b+1};d.push(e)}this.showScoreLab(100*c+500,a,b)}else if(this.envelopeSpriteArr[a][b].isOnStar){for(var f=0;f<=5;f++)if(this.envelopeSpriteArr[a][f].removed=!0,this.envelopeBomeSpriteArr[a][f].isFreshBome=!0,this.envelopeBomeSpriteArr[a][f].freshtype=1,this.envelopeSpriteArr[a][f].isnotBomb=!0,this.envelopeSpriteArr[a][f].isBomb){var e={x:a,y:f};d.push(e)}for(var f=0;f<=4;f++)if(this.envelopeSpriteArr[f][b].removed=!0,this.envelopeBomeSpriteArr[f][b].isFreshBome=!0,this.envelopeBomeSpriteArr[f][b].freshtype=2,this.envelopeSpriteArr[f][a].isnotBomb=!0,this.envelopeSpriteArr[f][a].isBomb){var e={x:f,y:b};d.push(e)}this.envelopeBomeSpriteArr[a][b].isFreshBome=!0,this.envelopeBomeSpriteArr[a][b].freshtype=0,this.showScoreLab(1700,a,b)}for(var f=0;f<=d.length-1;f++)this.changeBomb(d[f].x,d[f].y)}},sameAllBome:function(a,b,c){this.combotimes++;for(var d=0,e=0;e<=4;e++)for(var f=0;f<=5;f++)this.envelopeSpriteArr[e][f].envelopeType==a&&(this.envelopeSpriteArr[e][f].removed=!0,this.envelopeBomeSpriteArr[e][f].isBome=!0,this.envelopeSpriteArr[e][f].Big(),this.envelopeSpriteArr[e][f].isBomb&&this.changeBomb(e,f),d++);this.showScoreLab(100*d+600,b,c),this.envelopeSpriteArr[b][c].Big(),this.envelopeSpriteArr[b][c].removed=!0,this.envelopeBomeSpriteArr[b][c].isBome=!0;for(var g=0;g<=4;g++)this.spliceEnvelopeSprite(g,0,0);var h=cc.delayTime(.2),i=cc.callFunc(function(){this.changeEvelopeSpriteArr()},this),j=cc.sequence(h,i);this.runAction(j)},showComboLab:function(a){this.combotimes>1&&(this.spriteword.setVisible(!0),this.spritebg.setVisible(!0),this.gesprite.setVisible(!0));var b=cc.director.getWinSize(),c=cc.textureCache.addImage(res.combo_num),d=61.9,e=182;if(this.combotimes<10){var f=new cc.SpriteFrame(c,cc.rect(d*this.combotimes,0*e,d,e));this.gesprite.setSpriteFrame(f),this.gesprite.setPosition(cc.p(b.width/2+150,890))}else{var g=this.combotimes%10;this.shisprite.setVisible(!0);var f=new cc.SpriteFrame(c,cc.rect(d*g,0*e,d,e));this.gesprite.setSpriteFrame(f),this.gesprite.setPosition(cc.p(b.width/2+185,890));var h=this.combotimes/10,i=new cc.SpriteFrame(c,cc.rect(d*h,0*e,d,e));this.shisprite.setSpriteFrame(i),this.shisprite.setPosition(cc.p(b.width/2+150,890))}},showScoreLab:function(a,b,c,d){game.score+=a,gameScore=game.score;var e=112,f=78,g=new cc.LabelTTF(a+"","90",40,cc.size(160,50),cc.TEXT_ALIGNMENT_LEFT);this.topLayer.addChild(g,10),g.fillStyle=cc.color(255,255,255,255),g.setPosition(cc.p(130*b+e,132*c+f)),void 0!=d&&g.setPosition(d);var h=cc.moveBy(1,cc.p(0,200)),i=cc.fadeOut(2),j=cc.spawn(h,i),k=cc.callFunc(function(){this.topLayer.removeChild(g)},this),l=cc.sequence(j,k);g.runAction(l)}}),EndScene=cc.Scene.extend({onEnter:function(){this._super(),this.init()},init:function(){var a=cc.director.getWinSize(),b=cc.Sprite.create(res.endPage);b.setPosition(a.width/2,a.height/2),this.addChild(b,0);var c=new cc.MenuItemImage(res.playagain,res.playagain,function(){game.resetGame();new BeginScene;cc.director.runScene(new BeginScene)},this);c.setPosition(1,-190);var d=new cc.Menu(c);this.addChild(d,1);var e=new cc.MenuItemSprite(new cc.Sprite(res.more),new cc.Sprite(res.more),function(){window.location.href=g_link},this);e.setPosition(1,-450);var f=new cc.Menu(e);this.addChild(f,3);var g=new cc.LabelTTF(gameScore,"90",40,cc.size(160,50),cc.TEXT_ALIGNMENT_LEFT);g.fillStyle=cc.color(195,103,35,255),g.x=cc.winSize.width/2+60,g.y=cc.winSize.height/2-115,this.addChild(g,10)}}),BeginScene=cc.Scene.extend({ctor:function(){this._super(),this.init()},init:function(){var a=cc.director.getWinSize(),b=cc.Sprite.create(res.begin_bg);b.setPosition(a.width/2,a.height/2),this.addChild(b,0);var c=new cc.MenuItemImage(res.begin_but,res.begin_but,function(){cc.director.runScene(new MyScene)},this);c.setPosition(0,-a.height/6);var d=new cc.Menu(c);this.addChild(d,1);var e=new cc.MenuItemImage(res.prizeAndRule,res.prizeAndRule,this.callFun1,this);this.prizeAndRuleMenu=new cc.Menu(e),this.prizeAndRuleMenu.x=80,this.prizeAndRuleMenu.y=a.height-50;var f=new cc.MenuItemImage(res.phb,res.phb,this.callFun3,this);this.phbMenu=new cc.Menu(f),this.phbMenu.x=a.width-200,this.phbMenu.y=a.height-50;var g=new cc.MenuItemImage(res.myPrize,res.myPrize,this.callFun2,this);this.myPrizeMenu=new cc.Menu(g),this.myPrizeMenu.x=a.width-80,this.myPrizeMenu.y=a.height-50;var h=new cc.Sprite(res.guizeBg);h.x=a.width/2,h.y=a.height/2,this.addChild(h,100),h.setVisible(!1);var i=new cc.MenuItemSprite(new cc.Sprite(res.guize),new cc.Sprite(res.guize),function(){h.setVisible(!0),d.setVisible(!1),l.setVisible(!0)},this),j=new cc.Menu(i);j.x=a.width/2,j.y=130,this.addChild(j,3);var k=new cc.MenuItemSprite(new cc.Sprite(res.back),new cc.Sprite(res.back),function(){h.setVisible(!1),d.setVisible(!0),l.setVisible(!1)},this),l=new cc.Menu(k);l.x=a.width/2,l.y=a.height/2-100,this.addChild(l,101),l.setVisible(!1),this.returnRound(res.round_1,5,1080),this.returnRound(res.round_2,3,360),this.returnRound(res.round_3,7,-720)},onExit:function(){this.removeAllChildrenWithCleanup(!0)},returnRound:function(a,b,c){var d=cc.director.getWinSize(),e=cc.Sprite.create(a);e.setPosition(d.width/2,d.height/3),this.addChild(e,0);var c=cc.rotateBy(b,c),f=cc.sequence(c,c.reverse()).repeatForever();e.runAction(f)},callFun1:function(){ruleAndPrizeCallFun()},callFun2:function(){myPrizeCallFun()},callFun3:function(){myPMlistCallFun()}}),envelopeSprite=cc.Sprite.extend({envelopeType:void 0,envelopeL:1e3,envelopeH:1e3,moveBoole:!1,DirectionType:5,moveGap:130,removed:!1,isInited:!1,moveTime:.1,downTime:.3,isdownTime:.3,fireStarAniTime:.1,isFire:!1,isStar:!1,isSameAll:!1,isOnFire:!1,isOnStar:!1,isOnSameAll:!1,isnotBomb:!1,isBomb:!1,isBombed:!1,isnormalboom:!1,normaltype:0,downnow:!1,nextpos:null,movenow:!1,addnum:1e3,ctor:function(){this._super(),this.init()},init:function(){function a(a,b){if(!e.movenow&&!e.downnow)return f=a.getLocation(),d(a)}function b(a,b){}function c(a,b){g=a.getLocation();var c=cc.pSub(g,f);Math.abs(c.y)>Math.abs(c.x)?c.y<=-15&&e.envelopeH>0?(game.envelopeTouch=!0,e.DirectionType=1):c.y>=15&&e.envelopeH<5&&(game.envelopeTouch=!0,e.DirectionType=0):Math.abs(c.y)<Math.abs(c.x)&&(c.x>=15&&e.envelopeL<4?(game.envelopeTouch=!0,e.DirectionType=3):c.x<=-15&&e.envelopeL>0&&(game.envelopeTouch=!0,e.DirectionType=2))}function d(a){var b=a.getLocation(),c=cc.rect(-75,-75,130,130);return c.x+=e.x,c.y+=e.y,cc.rectContainsPoint(c,b)}switch(this.envelopeType=GetRandomNum(0,11),this.envelopeType){case 0:this.initWithFile(res.blue_envelope);break;case 1:this.initWithFile(res.green_envelope);break;case 2:this.initWithFile(res.red_envelope);break;case 3:this.initWithFile(res.yello_envelope);break;case 4:this.initWithFile(res.pink_envelope);break;case 5:this.initWithFile(res.zi_envelope);break;case 6:this.envelopeType=0,this.initWithFile(res.blue_envelope);break;case 7:this.envelopeType=1,this.initWithFile(res.green_envelope);break;case 8:this.envelopeType=2,this.initWithFile(res.red_envelope);break;case 9:this.envelopeType=3,this.initWithFile(res.yello_envelope);break;case 10:this.envelopeType=4,this.initWithFile(res.pink_envelope);break;case 11:this.envelopeType=5,this.initWithFile(res.zi_envelope)}var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:a,onTouchMoved:b,onTouchEnded:c},this);var f,g},setPos:function(a,b,c){this.Stay(),this.isInited&&this.isFireOrStar();var d=cc.callFunc(function(){this.downnow=!1},this);if(this.envelopeH==b){var e=cc.delayTime(.8),f=cc.sequence(e,d);return void this.runAction(f)}this.downnow=!0,this.envelopeL=a,this.envelopeH=b;var g=62,h=78,d=cc.callFunc(function(){this.getPosition().y!=132*this.envelopeH+h&&this.setPosition(cc.p(130*this.envelopeL+g,132*this.envelopeH+h)),this.downnow=!1},this);if(this.isInited){var e=cc.delayTime(this.isdownTime),i=cc.moveTo(this.downTime,cc.p(130*a+g,132*b+h)).easing(cc.easeIn(this.isdownTime-.2)),f=cc.sequence(e,i,d);return void this.runAction(f)}if(this.setPosition(cc.p(130*a+g,50*b+h+1200)),c){var e=cc.delayTime(this.isdownTime),i=cc.moveTo(this.downTime,cc.p(130*a+g,132*b+h)).easing(cc.easeIn(this.isdownTime-.2)),f=cc.sequence(e,i,d);this.runAction(f)}else{var i=cc.moveTo(this.downTime,cc.p(130*a+g,132*b+h)).easing(cc.easeIn(this.isdownTime-.2)),f=cc.sequence(i,d);this.runAction(f)}this.isInited=!0},Big:function(){var a=cc.scaleTo(.2,1.5);this.runAction(a)},Up:function(a){this.envelopeH++,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Down:function(a){this.envelopeH--,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);
b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Left:function(a){this.envelopeL--,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Right:function(a){this.envelopeL++,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Stay:function(a){this.DirectionType=5},onStar:function(){var a=cc.textureCache.addImage(res.envelope_star),b=140,c=new cc.SpriteFrame(a,cc.rect(0*b,0,b,b+2)),d=new cc.SpriteFrame(a,cc.rect(1*b,0,b,b+2)),e=new cc.Sprite(c),f=this.getContentSize().width,g=this.getContentSize().height;e.setPosition(cc.p(f/2,g/2)),this.addChild(e);var h=[];h.push(c),h.push(d);var i=new cc.Animation(h,this.fireStarAniTime),j=cc.animate(i);e.runAction(j.repeatForever()),this.isOnStar=!0},onFire:function(){var a=cc.textureCache.addImage(res.envelope_fie),b=140,c=new cc.SpriteFrame(a,cc.rect(0*b,0,b,b)),d=new cc.SpriteFrame(a,cc.rect(1*b,0,b,b)),e=new cc.SpriteFrame(a,cc.rect(2*b,0,b,b)),f=new cc.Sprite(c),g=this.getContentSize().width,h=this.getContentSize().height;f.setPosition(cc.p(g/2,h/2)),this.addChild(f,-1);var i=[];i.push(c),i.push(d),i.push(e);var j=new cc.Animation(i,this.fireStarAniTime),k=cc.animate(j);f.runAction(k.repeatForever()),this.isOnFire=!0},isFireOrStar:function(){this.isOnFire||this.isOnStar||this.isOnSameAll||(this.isFire&&this.onFire(),this.isStar&&this.onStar(),this.isSameAll&&this.onSameAll())},onSameAll:function(){this.envelopeType=1e3;var a=cc.textureCache.addImage(res.envelope_sameall),b=140,c=new cc.SpriteFrame(a,cc.rect(0*b,0,b,b)),d=new cc.SpriteFrame(a,cc.rect(1*b,0,b,b)),e=new cc.SpriteFrame(a,cc.rect(2*b,0,b,b)),f=new cc.Sprite(c),g=this.getContentSize().width,h=this.getContentSize().height;f.setPosition(cc.p(g/2,h/2)),this.addChild(f,-1);var i=[];i.push(c),i.push(d),i.push(e);var j=new cc.Animation(i,this.fireStarAniTime),k=cc.animate(j);f.runAction(k.repeatForever());var l=cc.SpriteFrame.create(res.blue_envelope,cc.rect(0,0,92,113)),m=cc.SpriteFrame.create(res.green_envelope,cc.rect(0,0,92,113)),n=cc.SpriteFrame.create(res.red_envelope,cc.rect(0,0,92,113)),o=cc.SpriteFrame.create(res.yello_envelope,cc.rect(0,0,92,113)),p=cc.SpriteFrame.create(res.pink_envelope,cc.rect(0,0,92,113)),q=[];q.push(l),q.push(m),q.push(n),q.push(o),q.push(p);var r=new cc.Animation(q,3*this.fireStarAniTime),s=cc.animate(r);this.runAction(s.repeatForever()),this.isOnSameAll=!0}}),envelopeBomeSprite=cc.Sprite.extend({bomeL:1e3,bomeH:1e3,bomeanimate:null,isBome:!1,isFireBome:!1,isFreshBome:!1,freshtype:0,ctor:function(){this._super(),this.init()},init:function(){var a=cc.textureCache.addImage(res.envelope_bome),b=new cc.SpriteFrame(a,cc.rect(0,0,142,142)),c=new cc.SpriteFrame(a,cc.rect(142,0,142,142)),d=new cc.SpriteFrame(a,cc.rect(284,0,142,142)),e=new cc.SpriteFrame(a,cc.rect(426,0,142,142)),f=new cc.SpriteFrame(a,cc.rect(568,0,142,142)),g=[];g.push(b),g.push(c),g.push(d),g.push(e),g.push(f);var h=new cc.Animation(g,.05),i=cc.animate(h);this.initWithSpriteFrame(b),this.visible=!1;var j=cc.callFunc(function(){this.visible=!1},this);this.bomeanimate=cc.sequence(i,j);var k=cc.textureCache.addImage(res.envelope_firebome),l=new cc.SpriteFrame(k,cc.rect(0,0,142,142)),m=new cc.SpriteFrame(k,cc.rect(142,0,142,142)),n=new cc.SpriteFrame(k,cc.rect(284,0,142,142)),o=[];o.push(l),o.push(m),o.push(n);var p=new cc.Animation(o,.05),q=cc.animate(p),r=cc.callFunc(function(){this.visible=!1},this);this.firebomeanimate=cc.sequence(q,r);var s=cc.textureCache.addImage(res.envelope_star),t=140,u=new cc.SpriteFrame(s,cc.rect(0*t,0,t,t+2)),v=new cc.SpriteFrame(s,cc.rect(1*t,0,t,t+2)),w=[];w.push(u),w.push(v);var x=new cc.Animation(w,.05),y=cc.animate(x).repeat(8),z=cc.callFunc(function(){this.visible=!1},this);this.freshbomeanimate=cc.sequence(y,z);var A=cc.textureCache.addImage(res.envelope_freshh),t=140,B=new cc.SpriteFrame(A,cc.rect(0*t,0,t,t+2)),C=new cc.SpriteFrame(A,cc.rect(1*t,0,t,t+2)),D=[];D.push(B),D.push(C);var E=new cc.Animation(D,.05),F=cc.animate(E).repeat(8),G=cc.callFunc(function(){this.visible=!1},this);this.freshbomeanimateh=cc.sequence(F,G);var H=cc.textureCache.addImage(res.envelope_freshl),t=140,I=new cc.SpriteFrame(H,cc.rect(0*t,0,t,t+2)),J=new cc.SpriteFrame(H,cc.rect(1*t,0,t,t+2)),K=[];K.push(I),K.push(J);var L=new cc.Animation(K,.05),M=cc.animate(L).repeat(16),G=cc.callFunc(function(){this.visible=!1},this);this.freshbomeanimatel=cc.sequence(M,G)},setPos:function(a,b){this.envelopeL=a,this.envelopeH=b;var c=62,d=84;this.setPosition(cc.p(130*a+c,130*b+d)),this.isInited=!0},bome:function(){this.isBome&&(this.visible=!0,this.runAction(this.bomeanimate),this.isFreshBome=!1,this.isBome=!1,this.isFireBome=!1)},firebome:function(){this.isFireBome&&(this.visible=!0,this.runAction(this.firebomeanimate),this.isFreshBome=!1,this.isBome=!1,this.isFireBome=!1)},selectBome:function(){this.isFireBome?this.firebome():this.isFreshBome?this.freshbome():this.isBome&&this.bome()},freshbome:function(){console.log("fresh"),this.isFreshBome&&(this.visible=!0,0==this.freshtype?this.runAction(this.freshbomeanimate):1==this.freshtype?this.runAction(this.freshbomeanimatel):2==this.freshtype&&this.runAction(this.freshbomeanimateh),this.isFreshBome=!1,this.isBome=!1,this.isFireBome=!1)}}),loadingSprite=cc.Sprite.extend({textureWidth:null,textureHeight:null,ctor:function(){this._super(),this.init()},init:function(){this.initWithFile(res.time_loading),this.textureWidth=this.getContentSize().width,this.textureHeight=this.getContentSize().height,this.setPosition(38,833),this.setAnchorPoint(0,.5)},setPrecent:function(a){var b=this.getTextureRect(),c=a/100;this.setTextureRect(cc.rect(b.x,b.y,this.textureWidth*c,this.textureHeight))}});